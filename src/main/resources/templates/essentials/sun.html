<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pl">
<head>
    <th:block th:replace="~{fragments/head :: head-content(
        pageTitle='Wschody i Zachody Słońca | Złota Godzina | CzyZlowie',
        pageDescription='Sprawdź dokładne godziny wschodu i zachodu słońca dla swojego łowiska. Wykorzystaj złotą godzinę na najlepsze brania drapieżników.'
    )}"></th:block>

    <link rel="stylesheet" th:href="@{/css/essentials/sun.css}">
</head>
<body class="sun-page">

<nav th:replace="~{fragments/navbar :: navbar}"></nav>

<div class="sun-bg-container">
    <picture>
        <source media="(max-width: 768px)" srcset="/assets/ryby/sunrise-bg-mobile.jpg">
        <img th:src="@{/assets/drapiezniki.jpg}" alt="Mglisty poranek nad wodą" class="sun-bg-image">
    </picture>
    <div class="sun-bg-overlay"></div>
    <div class="sun-glow glow-gold-top"></div>
    <div class="sun-glow glow-orange-bottom"></div>
</div>

<main class="sun-wrapper pb-5 position-relative z-2">
    <div class="container-xl pt-4 mt-3">

        <nav aria-label="breadcrumb" class="mb-4">
            <ol class="breadcrumb sun-breadcrumb">
                <li class="breadcrumb-item"><a th:href="@{/}"><i data-lucide="home" class="bc-icon text-brand-green"></i> Główna</a></li>
                <li class="breadcrumb-item"><a th:href="@{/niezbednik}">Niezbędnik</a></li>
                <li class="breadcrumb-item active fw-bold text-white" aria-current="page">Wschody i Zachody</li>
            </ol>
        </nav>

        <header class="sun-glass-panel p-4 p-lg-5 mb-4 border-sun-gold-subtle">
            <div class="row align-items-center justify-content-between g-4">
                <div class="col-lg-6">
                    <div class="d-flex align-items-center gap-3 mb-3">
                        <div class="sun-icon-pulse">
                            <i data-lucide="sun" class="text-sun-gold" style="width: 32px; height: 32px;"></i>
                        </div>
                        <h1 class="display-5 fw-black text-white mb-0 sun-title-glow">Wschody i Zachody</h1>
                    </div>
                    <p class="sun-text-readable fs-5 mb-0">
                        Zlokalizuj <span class="text-sun-gold fw-bold text-glow-gold">Złotą Godzinę</span> i zaplanuj wędkowanie w szczycie aktywności wizualnej ryb.
                    </p>
                </div>

                <div class="col-lg-6 text-lg-end">
                    <form id="sun-geocoding-form" class="sun-search-form" aria-label="Wyszukiwarka wschodów i zachodów">
                        <div class="sun-search-input-group d-flex flex-column flex-lg-row align-items-stretch align-items-lg-center rounded-4 rounded-lg-pill p-2 p-lg-1"
                             style="background: rgba(0, 0, 0, 0.4); border: 1px solid rgba(255, 255, 255, 0.1);">

                            <div class="d-flex align-items-center flex-grow-1 px-3 py-2 py-lg-1">
                                <i data-lucide="map-pin" class="text-sun-gold flex-shrink-0" style="width: 20px;"></i>
                                <input type="text" id="sun-city-input" class="form-control shadow-none border-0 bg-transparent text-white w-100 px-2"
                                       placeholder="Wpisz miasto..." th:value="${locationName}" required
                                       style="outline: none;">
                            </div>

                            <div class="vr bg-white opacity-25 d-none d-lg-block mx-1" style="width: 1px; min-height: 24px;"></div>
                            <hr class="d-lg-none my-1 border-white opacity-10 mx-3">

                            <div class="d-flex align-items-center px-3 py-2 py-lg-1">
                                <i data-lucide="calendar" class="text-sun-gold flex-shrink-0 d-lg-none" style="width: 20px;"></i>
                                <input type="date" id="sun-date-input" class="form-control shadow-none border-0 bg-transparent text-white w-100 px-lg-2"
                                       th:value="${selectedDate}" required
                                       style="cursor: pointer; outline: none; color-scheme: dark;">
                            </div>

                            <button type="submit" id="sun-search-btn" class="btn rounded-3 rounded-lg-pill border-0 px-4 py-3 py-lg-2 ms-lg-1 d-flex align-items-center justify-content-center gap-2 flex-shrink-0 fw-bold"
                                    style="background: var(--sun-gold); color: #000; transition: 0.3s;">
                                Szukaj <i data-lucide="chevron-right" style="width: 18px;"></i>
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </header>

        <div class="row g-4 mb-4" th:if="${sun != null}">

            <div class="col-lg-8">

                <div class="sun-glass-panel p-0 mb-4 overflow-hidden position-relative">
                    <div class="row g-0 position-relative z-1">
                        <div class="col-md-5 p-4 p-md-5 text-center text-md-start sun-border-end d-flex flex-column justify-content-center">
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <span class="text-uppercase fw-bold fs-7 sun-text-readable" style="letter-spacing: 1px;">Dzisiaj</span>
                                <span class="sun-location-badge" th:text="${locationName}">Warszawa</span>
                            </div>

                            <h2 class="display-6 fw-black text-white mb-2" id="currentTimeDisplay" th:if="${sun.today}">--:--</h2>

                            <th:block th:if="${sun.today}">
                                <p class="fs-6 text-sun-orange fw-bold mb-4 d-flex align-items-center justify-content-center justify-content-md-start gap-2" th:if="${sun.daylight}">
                                    <i data-lucide="sunset" style="width: 18px;"></i> Do zachodu: <span th:text="${sun.timeToSunsetFormatted}"></span>
                                </p>
                                <p class="fs-6 text-blue-400 fw-bold mb-4 d-flex align-items-center justify-content-center justify-content-md-start gap-2" th:unless="${sun.daylight}">
                                    <i data-lucide="moon" style="width: 18px;"></i> Słońce jest poza horyzontem
                                </p>
                            </th:block>

                            <th:block th:unless="${sun.today}">
                                <p class="fs-6 text-white opacity-75 fw-bold mb-4 d-flex align-items-center justify-content-center justify-content-md-start gap-2">
                                    <i data-lucide="calendar" style="width: 18px;"></i> Dzień: <span th:text="${#temporals.format(selectedDate, 'dd.MM.yyyy')}"></span>
                                </p>
                            </th:block>

                            <div class="d-flex gap-4 justify-content-center justify-content-md-start">
                                <div>
                                    <span class="d-block sun-text-readable fs-8 text-uppercase fw-bold mb-1">Wschód</span>
                                    <span class="fs-4 fw-bold text-white" th:text="${sun.sunriseTime}">05:42</span>
                                </div>
                                <div>
                                    <span class="d-block sun-text-readable fs-8 text-uppercase fw-bold mb-1">Zachód</span>
                                    <span class="fs-4 fw-bold text-white" th:text="${sun.sunsetTime}">19:15</span>
                                </div>
                            </div>
                        </div>

                        <div class="col-md-7 p-4 p-md-5 sun-condition-bg d-flex align-items-center justify-content-center">
                            <div class="sun-arc-wrapper position-relative w-100" style="max-width: 300px;">
                                <input type="hidden" id="js-sunrise-time" th:value="${sun.sunrise}">
                                <input type="hidden" id="js-sunset-time" th:value="${sun.sunset}">
                                <input type="hidden" id="js-is-today" th:value="${sun.today}">

                                <svg viewBox="0 0 200 110" class="sun-arc-svg w-100 h-auto" style="overflow: visible;">
                                    <path id="sunArcPath" d="M 10 100 A 90 90 0 0 1 190 100" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="4" stroke-dasharray="5,5"/>
                                    <path id="sunProgressPath" d="M 10 100 A 90 90 0 0 1 190 100" fill="none" stroke="url(#goldGradient)" stroke-width="4"/>

                                    <defs>
                                        <linearGradient id="goldGradient" x1="0%" y1="0%" x2="100%" y2="0%">
                                            <stop offset="0%" stop-color="#fbbf24" />
                                            <stop offset="100%" stop-color="#f97316" />
                                        </linearGradient>
                                    </defs>
                                </svg>

                                <div id="sunDot" class="sun-position-dot text-glow-gold position-absolute translate-middle" style="left: 10px; top: 100px; transition: left 1s ease-out, top 1s ease-out;">
                                    <i data-lucide="sun" class="text-sun-gold" style="width: 28px; height: 28px; fill: #fbbf24;"></i>
                                </div>

                                <div class="arc-labels d-flex justify-content-between w-100 mt-2">
                                    <span class="sun-text-readable fs-8 fw-bold text-uppercase" th:text="${sun.sunriseTime}">Wschód</span>
                                    <span class="sun-text-readable fs-8 fw-bold text-uppercase" th:text="${sun.sunsetTime}">Zachód</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="sun-glass-panel p-4">
                    <h3 class="fs-5 text-white fw-bold mb-4 pb-3 border-bottom border-dark-subtle d-flex align-items-center gap-2">
                        <i data-lucide="clock" class="text-sun-gold" style="width: 20px;"></i> Wędkarski Harmonogram Dnia
                    </h3>

                    <div class="timeline-container">
                        <div th:each="event : ${sun.timeline}" class="timeline-item" th:classappend="${event.isGoldenHour} ? 'active-golden' : ''">

                            <div class="timeline-time" th:classappend="${event.isGoldenHour} ? ${event.titleClass} : ''" th:text="${event.timeRange}">05:10 - 05:42</div>

                            <div class="timeline-icon" th:classappend="${event.iconBgClass != null ? event.iconBgClass : ''}">
                                <i th:attr="data-lucide=${event.icon}" th:classappend="${event.iconColorClass != null ? event.iconColorClass : (event.isGoldenHour ? 'text-dark' : '')}"></i>
                            </div>

                            <div class="timeline-content">
                                <h4 class="fs-6 fw-bold mb-1" th:classappend="${event.titleClass != null ? event.titleClass : 'text-white'}" th:text="${event.title}">Świt</h4>
                                <p class="sun-text-readable fs-7 mb-0" th:classappend="${event.isGoldenHour ? 'text-white opacity-75' : ''}" th:utext="${event.description}"></p>
                            </div>
                        </div>
                    </div>
                </div>
                <article class="sun-glass-panel p-4 position-relative overflow-hidden mt-3" style="border-color: rgba(46, 204, 113, 0.4); background: linear-gradient(145deg, rgba(46, 204, 113, 0.05) 0%, rgba(0,0,0,0) 100%);">
                    <div class="row align-items-center position-relative z-1">
                        <div class="col-md-8 mb-3 mb-md-0">
                            <h3 class="fs-5 text-white fw-bold mb-2 d-flex align-items-center gap-2">
                                <i data-lucide="lightbulb" class="text-brand-green" style="width: 22px; height: 22px;"></i>
                                Twórzmy to razem!
                            </h3>
                            <p class="sun-text-readable fs-7 mb-0 pe-md-4">
                                Algorytmy to jedno, ale nic nie zastąpi doświadczenia znad wody. Masz pomysł na nową funkcję? Znasz lokalne schematy brań? Pomóż nam budować najlepszy kalendarz w sieci.
                            </p>
                        </div>
                        <div class="col-md-4 text-md-end">
                            <a href="/kontakt" class="btn w-100 fw-bold d-flex align-items-center justify-content-center gap-2 py-2"
                               style="background: rgba(46, 204, 113, 0.15); color: var(--brand-green); border: 1px solid rgba(46, 204, 113, 0.4); border-radius: 8px; transition: all 0.3s ease;"
                               onmouseover="this.style.background='var(--brand-green)'; this.style.color='#000';"
                               onmouseout="this.style.background='rgba(46, 204, 113, 0.15)'; this.style.color='var(--brand-green)';">
                                <i data-lucide="message-square-plus" style="width: 18px;"></i> Podziel się wiedzą
                            </a>
                        </div>
                    </div>
                </article>
            </div>

            <aside class="col-lg-4">
                <div class="d-flex flex-column gap-4 h-100">

                    <article class="sun-glass-panel p-4 position-relative overflow-hidden" style="border-color: rgba(59, 130, 246, 0.3);">
                        <div class="position-absolute top-0 end-0 p-3 opacity-25">
                            <i data-lucide="waves" style="width: 80px; height: 80px; color: #3b82f6;"></i>
                        </div>
                        <div class="mb-3 d-flex align-items-center gap-2 text-blue-400 border-bottom border-dark-subtle pb-3 position-relative z-1">
                            <i data-lucide="eye" style="width: 24px; height: 24px;"></i>
                            <h2 class="fs-5 text-white fw-bold mb-0">Wzrok a Słońce</h2>
                        </div>

                        <div class="sun-knowledge-item position-relative z-1">
                            <p class="sun-text-readable fs-7 lh-lg mb-3">
                                Kąt padania słońca determinuje zasady gry pod wodą. Gdy słońce jest nisko (świt/zmierzch), woda odbija światło jak lustro, tworząc podwodny półmrok.
                            </p>
                            <ul class="list-unstyled mb-0 d-flex flex-column gap-2 fs-7">
                                <li class="d-flex gap-2">
                                    <i data-lucide="swords" class="text-danger flex-shrink-0 mt-1" style="width: 16px; height: 16px;"></i>
                                    <span class="sun-text-readable"><strong class="text-white">Drapieżniki:</strong> Mają specjalną błonę odblaskową w oku (Tapetum Lucidum). W szarówce widzą doskonale, podczas gdy ofiara jest zdezorientowana.</span>
                                </li>
                                <li class="d-flex gap-2">
                                    <i data-lucide="leaf" class="text-success flex-shrink-0 mt-1" style="width: 16px; height: 16px;"></i>
                                    <span class="sun-text-readable"><strong class="text-white">Lin, Karaś, Leszcz:</strong> Unikają ostrego słońca, bo są wtedy "jak na widelcu" dla drapieżników i ptaków. Z żerowaniem czekają na ochronny płaszcz świtu i zmroku.</span>
                                </li>
                            </ul>
                        </div>
                    </article>

                    <article class="sun-glass-panel p-4 position-relative overflow-hidden" style="border-color: rgba(220, 38, 38, 0.3);">
                        <div class="position-absolute top-0 end-0 p-3 opacity-25">
                            <i data-lucide="crosshair" style="width: 80px; height: 80px; color: #dc2626;"></i>
                        </div>
                        <div class="mb-3 d-flex align-items-center gap-2 text-danger border-bottom border-dark-subtle pb-3 position-relative z-1">
                            <i data-lucide="swords" style="width: 24px; height: 24px;"></i>
                            <h2 class="fs-5 text-white fw-bold mb-0">Słońce a Drapieżniki</h2>
                        </div>

                        <div class="sun-knowledge-item position-relative z-1">
                            <p class="sun-text-readable fs-7 lh-lg mb-3">
                                Światło dyktuje warunki polowania. Kąt padania słońca i budowa oka (tzw. <em>tapetum lucidum</em>) decydują o tym, kto staje się ofiarą. Gdzie ich szukać?
                            </p>

                            <div class="d-flex flex-column gap-3 fs-7">
                                <div class="bg-dark bg-opacity-50 p-2 rounded border border-danger border-opacity-25">
                                    <strong class="text-white d-flex align-items-center gap-1 mb-1">
                                        <i data-lucide="moon" class="text-indigo-400" style="width: 14px;"></i> Sandacz i Sum (Łowcy Nocy)
                                    </strong>
                                    <span class="sun-text-readable d-block">
                            W pełnym słońcu (Zenit) nienawidzą światła – leżą przyklejone do dna w najgłębszych rynnach i dołkach. Gdy nadchodzi <strong>Zmierzch Żeglarski</strong>, wychodzą na skrajnie płytką wodę (nawet 0.5 - 1.5m). Szukaj ich na opaskach, przykosach i płytkich blatach, gdzie drobnica "idzie spać".
                        </span>
                                </div>

                                <div class="bg-dark bg-opacity-50 p-2 rounded border border-sun-gold border-opacity-25">
                                    <strong class="text-white d-flex align-items-center gap-1 mb-1">
                                        <i data-lucide="sun" class="text-sun-gold" style="width: 14px;"></i> Szczupak (Mistrz Złotej Godziny)
                                    </strong>
                                    <span class="sun-text-readable d-block">
                            Typowy wzrokowiec. Wykorzystuje długie cienie rzucane przez słońce o poranku i wieczorze. Szukaj go na spadkach (tzw. kantach) i w cieniu trzcin. Atakuje najchętniej, gdy słońce świeci mu "w plecy", co dodatkowo oślepia jego ofiarę.
                        </span>
                                </div>

                                <div class="bg-dark bg-opacity-50 p-2 rounded border border-blue-400 border-opacity-25">
                                    <strong class="text-white d-flex align-items-center gap-1 mb-1">
                                        <i data-lucide="sunrise" class="text-blue-400" style="width: 14px;"></i> Boleń i Okoń (Demony Szarówki)
                                    </strong>
                                    <span class="sun-text-readable d-block">
                            Dostają furii w <strong>Świcie i Zmierzchu Cywilnym</strong> (półmrok). Wypychają stada uklei pod samą powierzchnię, wywołując głośne gejzery wody. Gdy słońce wschodzi wyżej, bolenie wycofują się w głębszy nurt, a okonie schodzą w stada przy dnie.
                        </span>
                                </div>
                            </div>
                        </div>
                    </article>

                    <article class="sun-glass-panel p-4 position-relative overflow-hidden" style="border-color: rgba(249, 115, 22, 0.3);">
                        <div class="position-absolute top-0 end-0 p-3 opacity-25">
                            <i data-lucide="thermometer-sun" style="width: 80px; height: 80px; color: #f97316;"></i>
                        </div>
                        <div class="mb-3 d-flex align-items-center gap-2 text-sun-orange border-bottom border-dark-subtle pb-3 position-relative z-1">
                            <i data-lucide="flame" style="width: 24px; height: 24px;"></i>
                            <h2 class="fs-5 text-white fw-bold mb-0">Słońce to Metabolizm</h2>
                        </div>

                        <div class="sun-knowledge-item position-relative z-1">
                            <p class="sun-text-readable fs-7 lh-lg mb-3">
                                Ryby są zmiennocieplne. Słońce to ich piec. Temperatura wody bezpośrednio steruje ich trawieniem i chęcią do pobierania pokarmu (szczególnie karpiowatych).
                            </p>
                            <div class="bg-dark bg-opacity-50 p-3 rounded border border-sun-orange border-opacity-25 mb-0">
                                <strong class="text-white d-block mb-2"><i data-lucide="sun-dim" class="text-sun-gold" style="width: 16px;"></i> Gdzie szukać Karpi i Białorybu?</strong>
                                <ul class="mb-0 ps-3 fs-7 sun-text-readable d-flex flex-column gap-1">
                                    <li><strong>Wiosna/Jesień:</strong> Południe i popołudnie to sztos. Szukaj ryb na płytkich, nasłonecznionych blatach (szybko się nagrzewają).</li>
                                    <li><strong>Upalne Lato:</strong> Płycizny parzą (brak tlenu). Ryby schodzą głęboko za dnia. Żerują intensywnie <strong>tylko w nocy, o świcie i po zmroku</strong>. Amury to wyjątek – kochają upał.</li>
                                </ul>
                            </div>
                        </div>
                    </article>

                    <div class="mt-auto bg-dark bg-opacity-50 p-3 rounded-3 border border-dark-subtle text-center sun-glass-panel flex-shrink-0">
                        <span class="d-block sun-text-readable fs-8 text-uppercase fw-bold mb-1">Długość dnia w Twojej lokalizacji</span>
                        <span class="fs-3 fw-black text-brand-green text-glow-green" th:text="${sun.dayLengthFormatted}">13h 33m</span>
                        <div class="fs-8 mt-1 text-white opacity-50" th:text="${sun.dayLengthDifferenceFormatted}">+3 minuty w stosunku do wczoraj</div>

                        <div class="mt-3 pt-3 border-top border-dark-subtle text-start">
                            <span class="fs-8 sun-text-readable d-block"><strong class="text-white">Fotoperiod (długość dnia)</strong> to główny biologiczny zapalnik. Dłuższy dzień (wiosna) odpala instynkt tarłowy i agresywne żerowanie. Krótszy dzień (jesień) to sygnał do budowy tkanki tłuszczowej na zimę.</span>
                        </div>
                    </div>

                </div>
            </aside>

        </div>

        <div class="row" th:if="${sun == null || sun.sunrise == null}">
            <div class="col-12">
                <div class="alert alert-warning text-center border-sun-gold-subtle bg-dark text-white">
                    <i data-lucide="alert-circle" class="text-sun-gold mb-2" style="width: 32px; height: 32px;"></i><br>
                    Brak danych o wschodach i zachodach słońca dla tej lokalizacji w wybranym dniu.
                </div>
            </div>
        </div>

    </div>
</main>

<footer th:replace="~{fragments/footer :: footer}"></footer>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        lucide.createIcons();

        const isTodayStr = document.getElementById('js-is-today')?.value;
        const isToday = isTodayStr === 'true';

        function updateClock() {
            if(!isToday) return;
            const now = new Date();
            const timeString = now.toLocaleTimeString('pl-PL', { hour: '2-digit', minute: '2-digit' });
            const clockEl = document.getElementById('currentTimeDisplay');
            if(clockEl) clockEl.textContent = timeString;
        }
        if(isToday) {
            setInterval(updateClock, 1000);
            updateClock();
        }

        function animateSun() {
            const sunriseStr = document.getElementById('js-sunrise-time')?.value;
            const sunsetStr = document.getElementById('js-sunset-time')?.value;

            if (!sunriseStr || !sunsetStr) return;

            const sunriseDate = new Date(sunriseStr);
            const sunsetDate = new Date(sunsetStr);

            const sunrise = sunriseDate.getTime();
            const sunset = sunsetDate.getTime();
            const totalDaylight = sunset - sunrise;

            const realNow = new Date();

            const nowForCalc = new Date(sunriseDate);
            nowForCalc.setHours(realNow.getHours(), realNow.getMinutes(), realNow.getSeconds());

            const now = nowForCalc.getTime();

            let progress = 0;
            if (now >= sunset) {
                progress = 1;
            } else if (now > sunrise) {
                progress = (now - sunrise) / totalDaylight;
            } else {
                progress = 0;
            }

            const path = document.getElementById('sunArcPath');
            const progressPath = document.getElementById('sunProgressPath');
            const dot = document.getElementById('sunDot');

            if (path && progressPath && dot) {
                const pathLength = path.getTotalLength();

                if (progressPath.style) {
                    progressPath.style.strokeDasharray = pathLength;
                    progressPath.style.strokeDashoffset = pathLength - (pathLength * progress);
                }

                const point = path.getPointAtLength(pathLength * progress);
                const percentX = (point.x / 200) * 100;
                const percentY = (point.y / 110) * 100;

                dot.style.left = percentX + '%';
                dot.style.top = percentY + '%';
            }
        }

        setTimeout(animateSun, 300);

        const form = document.getElementById('sun-geocoding-form');
        if (form) {
            form.addEventListener('submit', async function(e) {
                e.preventDefault();

                const inputVal = document.getElementById('sun-city-input').value;
                const dateVal = document.getElementById('sun-date-input').value;
                const btn = document.getElementById('sun-search-btn');
                const originalContent = btn.innerHTML;
                btn.innerHTML = '<span class="spinner-border spinner-border-sm" role="status" aria-hidden="true"></span>';
                btn.style.opacity = '0.7';
                btn.disabled = true;

                try {
                    const response = await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(inputVal)}&countrycodes=pl&limit=1`);
                    const data = await response.json();

                    if (data && data.length > 0) {
                        const lat = data[0].lat;
                        const lon = data[0].lon;

                        const rawName = data[0].name || inputVal;
                        const cleanName = rawName.split(',')[0].trim();

                        const urlParams = new URLSearchParams();
                        urlParams.set('lat', lat);
                        urlParams.set('lon', lon);
                        urlParams.set('miasto', cleanName);
                        if (dateVal) {
                            urlParams.set('date', dateVal);
                        }

                        window.location.href = '/wschody-zachody?' + urlParams.toString();
                    } else {
                        alert("Nie znaleziono takiej lokalizacji. Spróbuj wpisać inną nazwę.");
                        resetBtn();
                    }
                } catch (error) {
                    console.error("Błąd podczas wyszukiwania:", error);
                    alert("Wystąpił problem z połączeniem. Spróbuj ponownie za chwilę.");
                    resetBtn();
                }

                function resetBtn() {
                    btn.innerHTML = originalContent;
                    btn.style.opacity = '1';
                    btn.disabled = false;
                    lucide.createIcons();
                }
            });
        }
    });
</script>
</body>
</html>