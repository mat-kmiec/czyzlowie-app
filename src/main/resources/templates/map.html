<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <th:block th:replace="~{fragments/head :: head-content(pageTitle='Interaktywna Mapa')}"></th:block>
    <title></title>

    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" defer></script>
    <link rel="stylesheet" th:href="@{/css/map.css}">
    <script type="module" th:src="@{/js/map-logic.js}" defer></script>
</head>
<body>

<nav th:replace="~{fragments/navbar :: navbar}"></nav>

<div class="map-interface-wrapper">
    <button class="mobile-filter-trigger" id="mobileFilterBtn">
        <i data-lucide="sliders-horizontal"></i> Filtry i Lista
    </button>

    <aside class="map-sidebar" id="filterSidebar">
        <div class="sidebar-content">
            <div class="sidebar-header">
                <h3>Eksploruj mapę</h3>
                <button class="btn-close-sidebar" id="closeSidebarBtn">
                    <i data-lucide="x"></i>
                </button>
            </div>

            <div class="sidebar-search">
                <i data-lucide="search" class="search-icon"></i>
                <input type="text" id="mapSearch" placeholder="Szukaj łowiska, stacji...">
            </div>

            <div class="sidebar-section-title">Rodzaj mapy</div>
            <div class="map-layer-controls" id="layerControls">
                <button class="layer-btn active" data-layer="standard">
                    <i data-lucide="map"></i> Standard
                </button>
                <button class="layer-btn" data-layer="satellite">
                    <i data-lucide="satellite"></i> Satelita
                </button>
                <button class="layer-btn" data-layer="terrain">
                    <i data-lucide="mountain"></i> Teren
                </button>
            </div>

            <hr class="sidebar-divider">

            <div class="sidebar-section-title">Legenda / Filtry</div>
            <div class="sidebar-legend-wrapper">
                <div class="sidebar-legend" id="legendContainer"></div>
            </div>

            <hr class="sidebar-divider">

            <div class="sidebar-section-title">Dostępne lokalizacje (<span id="locCount">0</span>)</div>
            <div class="sidebar-list" id="locationsList"></div>
        </div>
    </aside>

    <main class="map-container">
        <div id="map" style="width: 100%; height: 100%;"></div>
    </main>
</div>
</body>
</html>