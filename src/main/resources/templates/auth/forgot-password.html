<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pl">
<head>
    <th:block th:replace="~{fragments/head :: head-content(
        pageTitle='Reset hasła | CzyZlowie',
        pageDescription='Nie pamiętasz hasła? Zresetuj je w kilku prostych krokach i wróć do planowania wędkarskich wypraw.'
    )}"></th:block>

    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/auth.css}">
    <script src="https://unpkg.com/lucide@latest" defer></script>
</head>
<body class="auth-page">

<nav th:replace="~{fragments/navbar :: navbar}"></nav>

<main class="auth-wrapper">
    <picture class="auth-bg-picture">
        <source media="(max-width: 768px)" srcset="/assets/ryby/predators-bg.jpg">
        <img src="/assets/ryby/predators-bg.jpg" alt="Mroczne dno jeziora" class="auth-bg-image">
    </picture>
    <div class="auth-bg-overlay"></div>

    <div class="container-xl d-flex justify-content-center align-items-center min-vh-100 py-5 position-relative z-2" style="margin-top: 30px;">

        <div class="auth-card glass-panel w-100" style="max-width: 900px;"> <div class="row g-0 align-items-center">

            <div class="col-lg-12 auth-form-section pe-lg-5 py-lg-4">

                <div class="text-center text-lg-start mb-4">
                    <a th:href="@{/}">
                        <img src="/assets/logo.png" alt="CzyZlowie Logo" class="auth-logo mb-4">
                    </a>
                    <h1 class="auth-title" style="font-size: 1.8rem;">Zapomniałeś hasła?</h1>
                    <p class="auth-subtitle">Wpisz swój adres e-mail, a wyślemy Ci bezpieczny link do zresetowania hasła.</p>
                </div>

                <div th:if="${param.error}" class="alert auth-alert alert-danger d-flex align-items-center gap-2">
                    <i data-lucide="shield-alert" style="width: 20px;"></i>
                    <span>Nie znaleźliśmy konta z tym adresem e-mail.</span>
                </div>

                <div th:if="${param.success}" class="alert auth-alert alert-success d-flex align-items-start gap-2">
                    <i data-lucide="mail-check" style="width: 24px; margin-top: 2px; flex-shrink:0;"></i>
                    <div>
                        <strong>Wysłano link!</strong><br>
                        <span class="fs-7">Sprawdź skrzynkę odbiorczą. Jeśli nie widzisz wiadomości, zajrzyj do folderu SPAM.</span>
                    </div>
                </div>

                <form th:unless="${param.success}" th:action="@{/zapomnialem-hasla}" method="post" class="auth-form mt-4">

                    <div class="form-group mb-4">
                        <label for="username" class="form-label text-white-50 fs-7 fw-bold text-uppercase mb-2">Adres E-mail</label>
                        <div class="input-icon-wrapper">
                            <i data-lucide="mail" class="input-icon"></i>
                            <input type="email" id="username" name="username" class="form-control auth-input" placeholder="Wpisz e-mail przypisany do konta" required autofocus>
                        </div>
                    </div>

                    <button type="submit" class="btn btn-auth-primary w-100 position-relative overflow-hidden">
                            <span class="position-relative z-1 d-flex align-items-center justify-content-center">
                                WYŚLIJ LINK RESETUJĄCY <i data-lucide="send" class="ms-2" style="width: 18px;"></i>
                            </span>
                        <div class="btn-shine"></div>
                    </button>
                </form>

                <div class="auth-footer mt-4 text-center text-lg-start">
                    <a th:href="@{/login}" class="auth-link fw-bold d-inline-flex align-items-center gap-1">
                        <i data-lucide="arrow-left" style="width: 16px;"></i> Wróć do logowania
                    </a>
                </div>
            </div>


        </div>
        </div>
    </div>
</main>

<footer th:replace="~{fragments/footer :: footer}"></footer>

<script>
    document.addEventListener('DOMContentLoaded', () => {
        lucide.createIcons();
    });
</script>
</body>
</html>